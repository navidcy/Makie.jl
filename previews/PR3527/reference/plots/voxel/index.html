<!DOCTYPE html><HTML lang="en"><head><meta charset="UTF-8"/><meta content="width=device-width, initial-scale=1" name="viewport"/><link href="../../../libs/highlight/github.min.css" rel="stylesheet"/><link href="../../../css/franklin.css" rel="stylesheet"/><link href="../../../css/minimal-mistakes.css" rel="stylesheet"/><link href="../../../css/makie.css" rel="stylesheet"/><link href="../../../assets/icon_transparent.png" rel="icon"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://files.stork-search.net/releases/v1.4.2/basic.css" rel="stylesheet"/><style>
    .stork-wrapper {
      width:99%
    }
    .stork-wrapper .stork-results {
      max-height: 42vh;
    }
</style><title>voxels · Makie</title></head><body class="layout--single"><div class="site-container"><div class="masthead"><div class="masthead__inner-wrap"><div class="masthead__menu"><nav class="greedy-nav" id="site-nav"><a class="title-icon" href="../../.."><img src="../../../assets/makie_logo_transparent.svg"/></a><ul class="visible-links"><li class="masthead__menu-item"><a href="https://github.com/JuliaPlots/Makie.jl"><img class="masthead-icon" src="../../../assets/GitHub-Mark-64px.png"/></a></li><li class="masthead__menu-item"><a href="../..">Reference</a></li><li class="masthead__menu-item"><a href="../../../tutorials/">Tutorials</a></li><li class="masthead__menu-item"><a href="../../../how-to/">How-Tos</a></li><li class="masthead__menu-item"><a href="../../../explanations/">Explanations</a></li><li class="masthead__menu-item"><a href="../../../api/">API</a></li><li class="masthead__menu-item"><a href="../../../news/">News</a></li><li class="masthead__menu-item" id="masthead-search-button"><script>
                            function toggleSearchOverlay(){
                                const overlay = document.querySelector("#makiesearch-overlay-container");
                                overlay.classList.toggle("hidden");
                                overlay.querySelector("input").focus();
                                overlay.onclick = function(e){
                                    if (e.target !== this){
                                        return
                                    }
                                    this.classList.toggle("hidden");
                                };
                            }
                        </script><button onclick="toggleSearchOverlay()"><i class="fas fa-search"></i> Search</button></li></ul><button class="greedy-nav__toggle" type="button"><span class="visually-hidden">Toggle menu</span><div class="navicon"></div></button><ul class="hidden-links hidden"></ul></nav></div></div></div><div id="main" role="main"><div id="overlay"></div><div class="hidden" id="makiesearch-overlay-container"><div id="makiesearch-overlay-container-inner"><div id="makiesearch-overlay"></div></div></div><div class="content-table-hidden" id="content-table-container"><button id="on-this-page" onclick="toggle_content_table_visibility()">On this page</button><script>
            function toggle_content_table_visibility(){
              const c = document.querySelector("#content-table-container");
              const ct = c.querySelector("#content-table");
              const vh = window.visualViewport.height;
              ct.style.height = `${Math.min(ct.scrollHeight, 0.66*vh)}px`;
              c.classList.toggle("content-table-hidden");
            }
          </script><div id="content-table"><ul class="page-content"><li><a href="#examples">Examples</a></li><li><ul><li><a href="#basic_example">Basic Example</a></li><li><a href="#gap_attribute">Gap Attribute</a></li><li><a href="#color_and_the_internal_representation">Color and the internal representation</a></li><li><a href="#colormaps">Colormaps</a></li><li><a href="#texturemaps">Texturemaps</a></li><li><a href="#updating_voxels">Updating Voxels</a></li><li><a href="#picking_voxels">Picking Voxels</a></li></ul></li></ul></div></div><div id="navbar-container"><div id="navbar"><div id="makiesearch"></div><ul><li><div class="tocitem-container"><a href="../../..">Home</a></div></li><li><input checked="" class="collapse-toggle" id="menuitem-2" type="checkbox"/><div class="tocitem-container"><label class="tocexpander" for="menuitem-2"><i class="docs-chevron"></i></label><a href="../..">Reference</a></div><ul><li><input class="collapse-toggle" id="menuitem-2-1" type="checkbox"/><div class="tocitem-container"><label class="tocexpander" for="menuitem-2-1"><i class="docs-chevron"></i></label><a href="../../blocks">Blocks</a></div><ul><li><div class="tocitem-container"><a href="../../blocks/axis">Axis</a></div></li><li><div class="tocitem-container"><a href="../../blocks/axis3">Axis3</a></div></li><li><div class="tocitem-container"><a href="../../blocks/box">Box</a></div></li><li><div class="tocitem-container"><a href="../../blocks/button">Button</a></div></li><li><div class="tocitem-container"><a href="../../blocks/colorbar">Colorbar</a></div></li><li><div class="tocitem-container"><a href="../../blocks/gridlayout">GridLayout</a></div></li><li><div class="tocitem-container"><a href="../../blocks/intervalslider">IntervalSlider</a></div></li><li><div class="tocitem-container"><a href="../../blocks/label">Label</a></div></li><li><div class="tocitem-container"><a href="../../blocks/legend">Legend</a></div></li><li><div class="tocitem-container"><a href="../../blocks/lscene">LScene</a></div></li><li><div class="tocitem-container"><a href="../../blocks/menu">Menu</a></div></li><li><div class="tocitem-container"><a href="../../blocks/polaraxis">PolarAxis</a></div></li><li><div class="tocitem-container"><a href="../../blocks/slider">Slider</a></div></li><li><div class="tocitem-container"><a href="../../blocks/slidergrid">SliderGrid</a></div></li><li><div class="tocitem-container"><a href="../../blocks/textbox">Textbox</a></div></li><li><div class="tocitem-container"><a href="../../blocks/toggle">Toggle</a></div></li></ul></li><li><input checked="" class="collapse-toggle" id="menuitem-2-2" type="checkbox"/><div class="tocitem-container"><label class="tocexpander" for="menuitem-2-2"><i class="docs-chevron"></i></label><a href="..">Plots</a></div><ul><li><div class="tocitem-container"><a href="../ablines">ablines</a></div></li><li><div class="tocitem-container"><a href="../arc">arc</a></div></li><li><div class="tocitem-container"><a href="../arrows">arrows</a></div></li><li><div class="tocitem-container"><a href="../band">band</a></div></li><li><div class="tocitem-container"><a href="../barplot">barplot</a></div></li><li><div class="tocitem-container"><a href="../boxplot">boxplot</a></div></li><li><div class="tocitem-container"><a href="../bracket">bracket</a></div></li><li><div class="tocitem-container"><a href="../contour">contour</a></div></li><li><div class="tocitem-container"><a href="../contour3d">contour3d</a></div></li><li><div class="tocitem-container"><a href="../contourf">contourf</a></div></li><li><div class="tocitem-container"><a href="../crossbar">crossbar</a></div></li><li><div class="tocitem-container"><a href="../datashader">datashader</a></div></li><li><div class="tocitem-container"><a href="../density">density</a></div></li><li><div class="tocitem-container"><a href="../ecdf">ecdfplot</a></div></li><li><div class="tocitem-container"><a href="../errorbars">errorbars</a></div></li><li><div class="tocitem-container"><a href="../heatmap">heatmap</a></div></li><li><div class="tocitem-container"><a href="../hexbin">hexbin</a></div></li><li><div class="tocitem-container"><a href="../hist">hist</a></div></li><li><div class="tocitem-container"><a href="../hvlines">hlines and vlines</a></div></li><li><div class="tocitem-container"><a href="../hvspan">hspan and vspan</a></div></li><li><div class="tocitem-container"><a href="../image">image</a></div></li><li><div class="tocitem-container"><a href="../lines">lines</a></div></li><li><div class="tocitem-container"><a href="../linesegments">linesegments</a></div></li><li><div class="tocitem-container"><a href="../mesh">mesh</a></div></li><li><div class="tocitem-container"><a href="../meshscatter">meshscatter</a></div></li><li><div class="tocitem-container"><a href="../pie">pie</a></div></li><li><div class="tocitem-container"><a href="../poly">poly</a></div></li><li><div class="tocitem-container"><a href="../qqplot">qqplot and qqnorm</a></div></li><li><div class="tocitem-container"><a href="../rainclouds">rainclouds</a></div></li><li><div class="tocitem-container"><a href="../rangebars">rangebars</a></div></li><li><div class="tocitem-container"><a href="../scatter">scatter</a></div></li><li><div class="tocitem-container"><a href="../scatterlines">scatterlines</a></div></li><li><div class="tocitem-container"><a href="../series">series</a></div></li><li><div class="tocitem-container"><a href="../spy">spy</a></div></li><li><div class="tocitem-container"><a href="../stairs">stairs</a></div></li><li><div class="tocitem-container"><a href="../stem">stem</a></div></li><li><div class="tocitem-container"><a href="../stephist">stephist</a></div></li><li><div class="tocitem-container"><a href="../streamplot">streamplot</a></div></li><li><div class="tocitem-container"><a href="../surface">surface</a></div></li><li><div class="tocitem-container"><a href="../text">text</a></div></li><li><div class="tocitem-container"><a href="../tooltip">tooltip</a></div></li><li><div class="tocitem-container"><a href="../tricontourf">tricontourf</a></div></li><li><div class="tocitem-container"><a href="../triplot">triplot</a></div></li><li><div class="tocitem-container"><a href="../violin">violin</a></div></li><li><div class="tocitem-container"><a href="../volume">volume</a></div></li><li><div class="tocitem-container"><a href="../volumeslices">volumeslices</a></div></li><li><div class="tocitem-container"><a href="../voronoiplot">voronoiplot</a></div></li><li><div class="tocitem-container"><a class="active" href="">voxels</a></div></li><li><div class="tocitem-container"><a href="../waterfall">waterfall</a></div></li><li><div class="tocitem-container"><a href="../wireframe">wireframe</a></div></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-3" type="checkbox"/><div class="tocitem-container"><label class="tocexpander" for="menuitem-2-3"><i class="docs-chevron"></i></label><a href="../../scene">Scene</a></div><ul><li><div class="tocitem-container"><a href="../../scene/SSAO">SSAO</a></div></li><li><div class="tocitem-container"><a href="../../scene/lighting">Lighting</a></div></li><li><div class="tocitem-container"><a href="../../scene/matcap">Matcap</a></div></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><div class="tocitem-container"><label class="tocexpander" for="menuitem-3"><i class="docs-chevron"></i></label><a href="../../../tutorials">Tutorials</a></div><ul><li><div class="tocitem-container"><a href="../../../tutorials/aspect-tutorial">Aspect ratio and size control tutorial</a></div></li><li><div class="tocitem-container"><a href="../../../tutorials/basic-tutorial">Basic Tutorial</a></div></li><li><div class="tocitem-container"><a href="../../../tutorials/layout-tutorial">Layout Tutorial</a></div></li><li><div class="tocitem-container"><a href="../../../tutorials/scenes">Scene tutorial</a></div></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><div class="tocitem-container"><label class="tocexpander" for="menuitem-4"><i class="docs-chevron"></i></label><a href="../../../how-to">How-Tos</a></div><ul><li><div class="tocitem-container"><a href="../../../how-to/draw-boxes-around-subfigures">How to draw boxes around subfigures</a></div></li><li><div class="tocitem-container"><a href="../../../how-to/save-figure-with-transparency">How to save a <code>Figure</code> with transparency</a></div></li></ul></li><li><input class="collapse-toggle" id="menuitem-5" type="checkbox"/><div class="tocitem-container"><label class="tocexpander" for="menuitem-5"><i class="docs-chevron"></i></label><a href="../../../explanations">Explanations</a></div><ul><li><div class="tocitem-container"><a href="../../../explanations/animation">Animations</a></div></li><li><input class="collapse-toggle" id="menuitem-5-2" type="checkbox"/><div class="tocitem-container"><label class="tocexpander" for="menuitem-5-2"><i class="docs-chevron"></i></label><a href="../../../explanations/backends">Backends</a></div><ul><li><div class="tocitem-container"><a href="../../../explanations/backends/cairomakie">CairoMakie</a></div></li><li><div class="tocitem-container"><a href="../../../explanations/backends/glmakie">GLMakie</a></div></li><li><div class="tocitem-container"><a href="../../../explanations/backends/rprmakie">RPRMakie</a></div></li><li><div class="tocitem-container"><a href="../../../explanations/backends/wglmakie">WGLMakie</a></div></li></ul></li><li><div class="tocitem-container"><a href="../../../explanations/blocks">Blocks</a></div></li><li><div class="tocitem-container"><a href="../../../explanations/cameras">Cameras</a></div></li><li><div class="tocitem-container"><a href="../../../explanations/colors">Colors</a></div></li><li><div class="tocitem-container"><a href="../../../explanations/events">Events</a></div></li><li><div class="tocitem-container"><a href="../../../explanations/faq">Frequently Asked Questions</a></div></li><li><div class="tocitem-container"><a href="../../../explanations/figure">Figures</a></div></li><li><div class="tocitem-container"><a href="../../../explanations/fonts">Fonts</a></div></li><li><div class="tocitem-container"><a href="../../../explanations/headless">Headless</a></div></li><li><div class="tocitem-container"><a href="../../../explanations/inspector">Inspecting Data</a></div></li><li><div class="tocitem-container"><a href="../../../explanations/latex">LaTeX</a></div></li><li><div class="tocitem-container"><a href="../../../explanations/layouting">How layouts work</a></div></li><li><div class="tocitem-container"><a href="../../../explanations/nodes">Observables &amp; Interaction</a></div></li><li><div class="tocitem-container"><a href="../../../explanations/plot_method_signatures">Plot Method Signatures</a></div></li><li><div class="tocitem-container"><a href="../../../explanations/recipes">Plot Recipes</a></div></li><li><div class="tocitem-container"><a href="../../../explanations/scenes">Scenes</a></div></li><li><div class="tocitem-container"><a href="../../../explanations/specapi">SpecApi</a></div></li><li><input class="collapse-toggle" id="menuitem-5-19" type="checkbox"/><div class="tocitem-container"><label class="tocexpander" for="menuitem-5-19"><i class="docs-chevron"></i></label><a href="../../../explanations/theming">Theming</a></div><ul><li><div class="tocitem-container"><a href="../../../explanations/theming/predefined_themes">Predefined themes</a></div></li></ul></li><li><div class="tocitem-container"><a href="../../../explanations/transparency">Basic transparency</a></div></li></ul></li><li><div class="tocitem-container"><a href="../../../api">API</a></div></li><li><div class="tocitem-container"><a href="../../../news">News</a></div></li></ul></div></div><div class="franklin-content"><h1 id="voxels"><a class="header-anchor" href="#voxels">voxels</a></h1><div class="docstring"><div class="doc-header" id="voxels"><a href="#voxels">voxels</a></div><div class="doc-content"><pre><code>voxels(x, y, z, chunk::Array{&lt;:Real, 3})
voxels(chunk::Array{&lt;:Real, 3})</code></pre><p>Plots a chunk of voxels centered at 0. Optionally the placement and scaling of the chunk can be given as range-like x, y and z. (Only the extrema are considered here. Voxels are always uniformly sized.)</p><p>Internally voxels are represented as 8 bit unsigned integer, with <code>0x00</code> always being an invisible "air" voxel. Passing a chunk with matching type will directly set those values. Note that color handling is specialized for the internal representation and may behave a bit differently than usual.</p><h2>Attributes</h2><h3>Specific to <code>Voxel</code></h3><ul><li><p><code>color = nothing</code> sets colors per voxel id, skipping <code>0x00</code>. This means that a voxel with id 1 will grab <code>plot.colors[1]</code> and so on up to id 255. This can also be set to a Matrix of colors, i.e. an image for texture mapping.</p></li><li><p><code>is_air = x -&gt; isnothing(x) || ismissing(x) || isnan(x)</code> controls which values in the input data are mapped to invisible (air) voxels.</p></li><li><p><code>depthsorting = false</code> controls the render order of voxels. If set to <code>false</code> voxels close to the viewer are rendered first which should reduce overdraw and yield better performance. If set to <code>true</code> voxels are rendered back to front enabling correct order for transparent voxels.</p></li><li><p><code>uvmap = nothing</code> defines a map from voxel ids (and optionally sides) to uv coordinates. These uv coordinates are then used to sample a 2D texture passed through <code>color</code> for texture mapping.</p></li><li><p><code>interpolate = false</code> controls whether the texture map is sampled with interpolation (i.e. smoothly) or not (i.e. pixelated).</p></li><li><p><code>gap = 0.0</code> sets the gap between adjacent voxels in units of the voxel size. This needs to be larger than 0.01 to take effect.</p></li><li><p><code>_limits</code>: Internal attribute for keeping track of <code>extrema(chunk)</code>.</p></li><li><p><code>_local_update</code>: Internal attribute for communicating updates to the backend.</p></li></ul><h3>3D shading attributes</h3><ul><li><p><code>shading = Makie.automatic</code> sets the lighting algorithm used. Options are <code>NoShading</code> (no lighting), <code>FastShading</code> (AmbientLight + PointLight) or <code>MultiLightShading</code> (Multiple lights, GLMakie only). Note that this does not affect RPRMakie.</p></li><li><p><code>diffuse::Vec3f = Vec3f(1.0)</code> sets how strongly the red, green and blue channel react to diffuse (scattered) light.</p></li><li><p><code>specular::Vec3f = Vec3f(0.4)</code> sets how strongly the object reflects light in the red, green and blue channels.</p></li><li><p><code>shininess::Real = 32.0</code> sets how sharp the reflection is.</p></li><li><p><code>backlight::Float32 = 0f0</code> sets a weight for secondary light calculation with inverted normals.</p></li><li><p><code>ssao::Bool = false</code> adjusts whether the plot is rendered with ssao (screen space ambient occlusion). Note that this only makes sense in 3D plots and is only applicable with <code>fxaa = true</code>.</p></li></ul><h3>Color attributes</h3><ul><li><p><code>colormap::Union{Symbol, Vector{&lt;:Colorant}} = :viridis</code> sets the colormap that voxels sample to get their color. Internally the colormap is always represented by 253 colors, matching voxel ids 2..254. Ids 1 and 255 are reserved for <code>lowclip</code> and <code>highclip</code>. <code>PlotUtils.cgrad(...)</code>, <code>Makie.Reverse(any_colormap)</code> can be used as well, or any symbol from ColorBrewer or PlotUtils. To see all available color gradients, you can call <code>Makie.available_gradients()</code>.</p></li><li><p><code>colorscale::Function = identity</code> color transform function. Can be any function, but only works well together with <code>Colorbar</code> for <code>identity</code>, <code>log</code>, <code>log2</code>, <code>log10</code>, <code>sqrt</code>, <code>logit</code>, <code>Makie.pseudolog10</code> and <code>Makie.Symlog10</code>.</p></li><li><p><code>colorrange::Tuple{&lt;:Real, &lt;:Real}</code> sets the values representing the start and end points of <code>colormap</code>. Internally this effects the voxel ids generated from the input data so that the colormap resolution remains at 253 colors.</p></li><li><p><code>lowclip::Union{Nothing, Symbol, &lt;:Colorant} = nothing</code> sets a color for any value below the colorrange. (voxel id = 1)</p></li><li><p><code>highclip::Union{Nothing, Symbol, &lt;:Colorant} = nothing</code> sets a color for any value above the colorrange. (voxel id = 255)</p></li><li><p><code>alpha = 1.0</code> sets the alpha value of the colormap or color attribute. Multiple alphas like in <code>plot(alpha=0.2, color=(:red, 0.5)</code> will get multiplied.</p></li></ul><h3>Generic attributes</h3><ul><li><p><code>visible::Bool = true</code> sets whether the plot will be rendered or not.</p></li><li><p><code>overdraw::Bool = false</code> sets whether the plot will draw over other plots. This specifically means ignoring depth checks in GL backends.</p></li><li><p><code>transparency::Bool = false</code> adjusts how the plot deals with transparency. In GLMakie <code>transparency = true</code> results in using Order Independent Transparency.</p></li><li><p><code>fxaa::Bool = true</code> adjusts whether the plot is rendered with fxaa (anti-aliasing).</p></li><li><p><code>inspectable::Bool = true</code> sets whether this plot should be seen by <code>DataInspector</code>.</p></li><li><p><code>depth_shift::Float32 = 0f0</code> adjusts the depth value of a plot after all other transformations, i.e. in clip space, where <code>0 &lt;= depth &lt;= 1</code>. This only applies to GLMakie and WGLMakie and can be used to adjust render order (like a tunable overdraw).</p></li><li><p><code>model::Makie.Mat4f</code> sets a model matrix for the plot. This replaces adjustments made with <code>translate!</code>, <code>rotate!</code> and <code>scale!</code>.</p></li><li><p><code>space::Symbol = :data</code> sets the transformation space for box encompassing the volume plot. See <code>Makie.spaces()</code> for possible inputs.</p></li></ul></div></div><h3 id="examples"><a class="header-anchor" href="#examples">Examples</a></h3><h4 id="basic_example"><a class="header-anchor" href="#basic_example">Basic Example</a></h4><pre><code class="language-julia">using GLMakie

# Same as volume example
r = LinRange(-1, 1, 100)
cube = [(x.^2 + y.^2 + z.^2) for x = r, y = r, z = r]
cube_with_holes = cube .* (cube .&gt; 1.4)

# To match the volume example with isovalue=1.7 and isorange=0.05 we map all
# values outside the range (1.65..1.75) to invisible air blocks with is_air
f, a, p = voxels(-1..1, -1..1, -1..1, cube_with_holes, is_air = x -&gt; !(1.65 &lt;= x &lt;= 1.75))</code></pre><p></p><p><a id="example_2d2e1855"><img height="450" src="../../../assets/reference/plots/voxel/code/output/example_2d2e1855.png" width="600"/></a></p><h4 id="gap_attribute"><a class="header-anchor" href="#gap_attribute">Gap Attribute</a></h4><p>The <code>gap</code> attribute allows you to specify a gap size between adjacent voxels. It is given in units of the voxel size (at <code>gap = 0</code>) so that <code>gap = 0</code> creates no gaps and <code>gap = 1</code> reduces the voxel size to 0. Note that this attribute only takes effect at values <code>gap &gt; 0.01</code>.</p><pre><code class="language-julia">using GLMakie

chunk = reshape(collect(1:27), 3, 3, 3)
voxels(chunk, gap = 0.33)</code></pre><p></p><p><a id="example_3107a4f2"><img height="450" src="../../../assets/reference/plots/voxel/code/output/example_3107a4f2.png" width="600"/></a></p><h4 id="color_and_the_internal_representation"><a class="header-anchor" href="#color_and_the_internal_representation">Color and the internal representation</a></h4><p>Voxels are represented as an <code>Array{UInt8, 3}</code> of voxel ids internally. In this representation the voxel id <code>0x00</code> is defined as an invisible air block. All other ids (0x01 - 0xff or 1 - 255) are visible and derive their color from the various color attributes. For <code>plot.color</code> specifically the voxel id acts as an index into an array of colors:</p><pre><code class="language-julia">using GLMakie

chunk = UInt8[
    1 0 2; 0 0 0; 3 0 4;;;
    0 0 0; 0 0 0; 0 0 0;;;
    5 0 6; 0 0 0; 7 0 8;;;
]
f, a, p = voxels(chunk, color = [:white, :red, :green, :blue, :black, :orange, :cyan, :magenta])</code></pre><p></p><p><a id="example_33bf107e"><img height="450" src="../../../assets/reference/plots/voxel/code/output/example_33bf107e.png" width="600"/></a></p><h4 id="colormaps"><a class="header-anchor" href="#colormaps">Colormaps</a></h4><p>With non <code>UInt8</code> inputs, colormap attributes (colormap, colorrange, highclip, lowclip and colorscale) work as usual, with the exception of <code>nan_color</code> which is not applicable:</p><pre><code class="language-julia">using GLMakie

chunk = reshape(collect(1:512), 8, 8, 8)

f, a, p = voxels(chunk,
    colorrange = (65, 448), colorscale = log10,
    lowclip = :red, highclip = :orange,
    colormap = [:blue, :green]
)</code></pre><p></p><p><a id="example_966f136e"><img height="450" src="../../../assets/reference/plots/voxel/code/output/example_966f136e.png" width="600"/></a></p><p>When passing voxel ids directly (i.e. an <code>Array{UInt8, 3}</code>) they are used to index a vector <code>[lowclip; sampled_colormap; highclip]</code>. This means id 1 maps to lowclip, 2..254 to colors of the colormap and 255 to highclip. <code>colorrange</code> and <code>colorscale</code> are ignored in this case.</p><h4 id="texturemaps"><a class="header-anchor" href="#texturemaps">Texturemaps</a></h4><p>You can also map a texture to voxels based on their id (and optionally the direction the face is facing). For this <code>plot.color</code> needs to be an image (matrix of colors) and <code>plot.uvmap</code> needs to be defined. The <code>uvmap</code> can take two forms here. The first is a <code>Vector{Vec4f}</code> which maps voxel ids (starting at 1) to normalized uv coordinates, formatted left-right-bottom-top.</p><pre><code class="language-julia">using GLMakie, FileIO

# load a sprite sheet with 10 x 9 textures
texture = FileIO.load(Makie.assetpath("voxel_spritesheet.png"))

# create a map idx -&gt; LRBT coordinate of the textures, normalized to a 0..1 range
uv_map = [
    Vec4f(x, x+1/10, y, y+1/9)
    for x in range(0.0, 1.0, length = 11)[1:end-1]
    for y in range(0.0, 1.0, length = 10)[1:end-1]
]

# Define which textures/uvs apply to which voxels (0 is invisible/air)
chunk = UInt8[
    1 0 2; 0 0 0; 3 0 4;;;
    0 0 0; 0 0 0; 0 0 0;;;
    5 0 6; 0 0 0; 7 0 9;;;
]

# draw
f, a, p = voxels(chunk, uvmap = uv_map, color = texture)</code></pre><p></p><p><a id="example_006e06e2"><img height="450" src="../../../assets/reference/plots/voxel/code/output/example_006e06e2.png" width="600"/></a></p><p>The second format allows you define sides in the second dimension of the uvmap. The order of sides is: -x, -y, -z, +x, +y, +z.</p><pre><code class="language-julia">using GLMakie, FileIO

texture = FileIO.load(Makie.assetpath("voxel_spritesheet.png"))

# idx -&gt; uv LRBT map for convenience. Note the change in order loop order
uvs = [
    Vec4f(x, x+1/10, y, y+1/9)
    for y in range(0.0, 1.0, length = 10)[1:end-1]
    for x in range(0.0, 1.0, length = 11)[1:end-1]
]

# Create uvmap with sides (-x -y -z x y z) in second dimension
uv_map = Matrix{Vec4f}(undef, 4, 6)
uv_map[1, :] = [uvs[9],  uvs[9],  uvs[8],  uvs[9],  uvs[9],  uvs[8]]  # 1 -&gt; birch
uv_map[2, :] = [uvs[11], uvs[11], uvs[10], uvs[11], uvs[11], uvs[10]] # 2 -&gt; oak
uv_map[3, :] = [uvs[2],  uvs[2],  uvs[2],  uvs[2],  uvs[2],  uvs[18]] # 3 -&gt; crafting table
uv_map[4, :] = [uvs[1],  uvs[1],  uvs[1],  uvs[1],  uvs[1],  uvs[1]]  # 4 -&gt; planks

chunk = UInt8[
    1 0 1; 0 0 0; 1 0 1;;;
    0 0 0; 0 0 0; 0 0 0;;;
    2 0 2; 0 0 0; 3 0 4;;;
]

f, a, p = voxels(chunk, uvmap = uv_map, color = texture)</code></pre><p></p><p><a id="example_3f502560"><img height="450" src="../../../assets/reference/plots/voxel/code/output/example_3f502560.png" width="600"/></a></p><p>The textures used in these examples are from <a href="https://www.kenney.nl/assets/voxel-pack">Kenney's Voxel Pack</a>.</p><h4 id="updating_voxels"><a class="header-anchor" href="#updating_voxels">Updating Voxels</a></h4><p>The voxel plot is a bit different from other plot types which affects how you can and should update its data.</p><p>First you <em>can</em> pass your data as an <code>Observable</code> and update that observable as usual:</p><pre><code class="language-julia">using GLMakie

chunk = Observable(ones(8,8,8))
f, a, p = voxels(chunk, colorrange = (0, 1))
chunk[] = rand(8,8,8)
f</code></pre><p></p><p><a id="example_0d755ed6"><img height="450" src="../../../assets/reference/plots/voxel/code/output/example_0d755ed6.png" width="600"/></a></p><p>You can also update the data contained in the plot object. For this you can't index into the plot though, since that will return the converted voxel id data. Instead you need to index into <code>p.args</code>.</p><pre><code class="language-julia">using GLMakie

f, a, p = voxels(ones(8,8,8), colorrange = (0, 1))
p.args[end][] = rand(8,8,8)
f</code></pre><p></p><p><a id="example_4f16362f"><img height="450" src="../../../assets/reference/plots/voxel/code/output/example_4f16362f.png" width="600"/></a></p><p>Both of these solutions triggers a full replacement of the input array (i.e. <code>chunk</code>), the internal representation (<code>plot.converted[4]</code>) and the texture on gpu. This can be quite slow and wasteful if you only want to update a small section of a large chunk. In that case you should instead update your input data without triggering an update (using <code>obs.val</code>) and then call <code>local_update(plot, is, js, ks)</code> to process the update:</p><pre><code class="language-julia">using GLMakie

chunk = Observable(rand(64, 64, 64))
f, a, p = voxels(chunk, colorrange = (0, 1))
chunk.val[30:34, :, :] .= NaN # or p.args[end].val
Makie.local_update(p, 30:34, :, :)
f</code></pre><p></p><p><a id="example_ee67307e"><img height="450" src="../../../assets/reference/plots/voxel/code/output/example_ee67307e.png" width="600"/></a></p><h4 id="picking_voxels"><a class="header-anchor" href="#picking_voxels">Picking Voxels</a></h4><p>The <code>pick</code> function is able to pick individual voxels in a voxel plot. The returned index is a flat index into the array passed to <code>voxels</code>, i.e. <code>plt.args[end][][idx]</code> will return the relevant data. One important thing to note here is that the returned index is a <code>UInt32</code> internally and thus has limited range. Very large voxel plots (~4.3 billion voxels or 2048 x 2048 x 1024) can reach this limit and trigger an integer overflow.</p><div class="page-foot"><div class="copyright">
    © Makie.jl. Last modified: February 04, 2024. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>.
      <p>These docs were autogenerated using Makie: v0.20.7, GLMakie: v0.9.8, CairoMakie: v0.11.8, WGLMakie: v0.9.7</p></div></div></div></div><div class="page__footer"><footer><div class="page__footer-follow"><ul class="social-icons"><li><a href="https://twitter.com/MakiePlots" rel="nofollow noopener noreferrer"><i aria-hidden="true" class="fab fa-fw fa-twitter-square"></i> Twitter</a></li><li><a href="https://github.com/JuliaPlots/Makie.jl" rel="nofollow noopener noreferrer"><i aria-hidden="true" class="fab fa-fw fa-github"></i> GitHub</a></li></ul></div><div class="page__footer-copyright">© Makie.jl. Powered by <a href="https://github.com/tlienart/Franklin.jl">Franklin</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div></footer></div></div><script src="../../../../versions.js" type="text/javascript"></script><script src="../../../siteinfo.js" type="text/javascript"></script><script src="../../../libs/warner.js" type="text/javascript"></script><script src="../../../libs/navbar.js"></script><link href="../../../pagefind/pagefind-ui.css" rel="stylesheet"/><script src="../../../pagefind/pagefind-ui.js" type="text/javascript"></script><script>
        window.addEventListener('DOMContentLoaded', (event) => {
            new PagefindUI({
              element: "#makiesearch",
              showImages: false
            });
            new PagefindUI({
              element: "#makiesearch-overlay",
              showImages: false
            });
        });
    </script><script async="" defer="" src="https://api.makie.org/latest.js"></script><noscript><img alt="" referrerpolicy="no-referrer-when-downgrade" src="https://api.makie.org/noscript.gif"/></noscript><script src="../../../libs/highlight/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();hljs.configure({tabReplace: '    '});</script></body></HTML>